define("bui-grid/1.1.0/index",["bui-common/1.1.0/common","bui-grid/1.1.0/src/simplegrid","bui-grid/1.1.0/src/grid","bui-grid/1.1.0/src/column","bui-grid/1.1.0/src/header","bui-grid/1.1.0/src/format","bui-grid/1.1.0/src/plugins/base","bui-data/1.1.0/index","bui-list/1.1.0/index","bui-mask/1.1.0/index","bui-toolbar/1.1.0/index","bui-grid/1.1.0/src/plugins/selection","bui-grid/1.1.0/src/plugins/cascade","bui-grid/1.1.0/src/plugins/cellediting","bui-grid/1.1.0/src/plugins/rowediting","bui-grid/1.1.0/src/plugins/dialog","bui-grid/1.1.0/src/plugins/autofit","bui-grid/1.1.0/src/plugins/gridmenu","bui-grid/1.1.0/src/plugins/summary","bui-grid/1.1.0/src/plugins/rownumber","bui-grid/1.1.0/src/plugins/columngroup","bui-grid/1.1.0/src/plugins/rowgroup","bui-grid/1.1.0/src/plugins/columnresize","bui-grid/1.1.0/src/plugins/editing","bui-menu/1.1.0/index"],function(e,t,i){var n=e("bui-common/1.1.0/common"),r=n.namespace("Grid");n.mix(r,{SimpleGrid:e("bui-grid/1.1.0/src/simplegrid"),Grid:e("bui-grid/1.1.0/src/grid"),Column:e("bui-grid/1.1.0/src/column"),Header:e("bui-grid/1.1.0/src/header"),Format:e("bui-grid/1.1.0/src/format"),Plugins:e("bui-grid/1.1.0/src/plugins/base")}),i.exports=r}),define("bui-grid/1.1.0/src/simplegrid",["bui-common/1.1.0/common","bui-data/1.1.0/index","bui-list/1.1.0/index"],function(e,t,i){var n=e("bui-common/1.1.0/common"),r=e("bui-list/1.1.0/index"),o=n.Component,l=(o.UIBase,n.prefix),s=l+"grid",a=s+"-row",d=l+"grid-row-odd",u=l+"grid-row-even",c=l+"grid-border",g=r.SimpleListView.extend({setColumns:function(e){var t=this,i=t.get("headerRowEl");e=e||t.get("columns"),i.empty(),n.each(e,function(e){t._createColumn(e,i)})},_createColumn:function(e,t){var i=this,r=n.substitute(i.get("columnTpl"),e);$(r).appendTo(t)},getItemTpl:function(e,t){var i=this,r=i.get("columns"),o=i.get("rowTpl"),l=t%2===0?d:u,s=[];return n.each(r,function(t){var n=t.dataIndex;s.push(i._getCellTpl(t,n,e))}),o=n.substitute(o,{cellsTpl:s.join(""),oddCls:l})},_getCellTpl:function(e,t,i){var r=this,o=e.renderer,l=o?o(i[t],i):i[t],s=r.get("cellTpl");return n.substitute(s,{elCls:e.elCls,text:l})},clearData:function(){var e=this,t=e.get("itemContainer");t.empty()},showData:function(e){var t=this;n.each(e,function(e,i){t._createRow(e,i)})},_uiSetInnerBorder:function(e){var t=this,i=t.get("el");e?i.addClass(c):i.removeClass(c)},_uiSetTableCls:function(e){var t=this,i=t.get("el").find("table");i.attr("class",e)}},{ATTRS:{headerRowEl:{valueFn:function(){var e=this,t=e.get("el").find("thead");return t.children("tr")}},itemContainer:{valueFn:function(){return this.get("el").find("tbody")}},tableCls:{}}},{xclass:"simple-grid-veiw"}),f=n.List.SimpleList.extend({renderUI:function(){this.get("view").setColumns()},bindUI:function(){var e=this,t=e.get("itemCls"),i=t+"-hover",n=e.get("el");n.delegate("."+t,"mouseover",function(e){var t=$(e.currentTarget);t.addClass(i)}).delegate("."+t,"mouseout",function(e){var t=$(e.currentTarget);t.removeClass(i)})},showData:function(e){this.clearData(),this.set("items",e)},clearData:function(){this.get("view").clearData()},_uiSetColumns:function(e){var t=this;t.clearData(),t.get("view").setColumns(e)}},{ATTRS:{itemCls:{view:!0,value:a},tableCls:{view:!0,value:s+"-table"},columns:{view:!0,sync:!1,value:[]},tpl:{view:!0,value:'<table cellspacing="0" class="{tableCls}" cellpadding="0"><thead><tr></tr></thead><tbody></tbody></table>'},innerBorder:{view:!0,value:!0},rowTpl:{view:!0,value:'<tr class="'+a+' {oddCls}">{cellsTpl}</tr>'},cellTpl:{view:!0,value:'<td class="'+s+'-cell {elCls}"><div class="'+s+'-cell-inner"><span class="'+s+'-cell-text">{text}</span></div></td>'},columnTpl:{view:!0,value:'<th class="'+s+'-hd {elCls}" width="{width}"><div class="'+s+'-hd-inner"><span class="'+s+'-hd-title">{title}</span></div></th>'},events:{value:{}},xview:{value:g}}},{xclass:"simple-grid"});f.View=g,i.exports=f}),define("bui-grid/1.1.0/src/grid",["bui-common/1.1.0/common","bui-mask/1.1.0/index","bui-toolbar/1.1.0/index","bui-data/1.1.0/index","bui-list/1.1.0/index","bui-grid/1.1.0/src/header","bui-grid/1.1.0/src/column"],function(e,t,i){function n(e){return o.isString(e)?-1!==e.indexOf("%"):!1}function r(e){return o.isNumber(e)&&(e-=U),e}var o=e("bui-common/1.1.0/common"),l=(e("bui-mask/1.1.0/index"),o.UA),s=o.Component,a=(e("bui-toolbar/1.1.0/index"),e("bui-list/1.1.0/index")),d=e("bui-grid/1.1.0/src/header"),u=e("bui-grid/1.1.0/src/column"),c=o.prefix,g=c+"grid-header-container",f=c+"grid-body",m=c+"grid-width",h=c+"grid-height",v=c+"grid-border",p=c+"grid-tbar",b=c+"grid-bbar",w=c+"grid-button-bar",C=c+"grid-strip",x=c+"grid-row",T=c+"grid-row-odd",_=c+"grid-row-even",y=c+"grid-cell",E=c+"grid-cell-inner",S="grid-td-",I=c+"grid-cell-text",R=c+"grid-cell-empty",B="17",A=c+"hidden",F="data-column-field",U=2,W=a.SimpleListView.extend({renderUI:function(){var e=this,t=e.get("el"),i=t.find("."+f);e.set("bodyEl",i),e._setTableTpl()},getItemTpl:function(e,t){var i=this,n=i._getColumns(),r=(i.get("tbodyEl"),i.get("rowTpl")),l=t%2===0?T:_,s=[];return o.each(n,function(n){var r=n.get("dataIndex");s.push(i._getCellTpl(n,r,e,t))}),i.get("useEmptyCell")&&s.push(i._getEmptyCellTpl()),r=o.substitute(r,{cellsTpl:s.join(""),oddCls:l})},findRow:function(e){var t=this;return $(t.findElement(e))},findCell:function(e,t){var i=S+e;return t.find("."+i)},resetHeaderRow:function(){if(this.get("useHeaderRow")){var e=this,t=e.get("headerRowEl"),i=e.get("tbodyEl");t&&t.remove(),t=e._createHeaderRow(),t.prependTo(i),e.set("headerRowEl",t)}},resetColumnsWidth:function(e,t){var i=this,n=i.get("headerRowEl"),r=i.findCell(e.get("id"),n);t=t||e.get("width"),r&&r.width(t),i.setTableWidth()},setTableWidth:function(e){if(!e&&n(this.get("width")))return void this.get("tableEl").width("100%");{var t=this,i=t._getInnerWidth(),r=t.get("height"),o=t.get("tableEl");t.get("forceFit"),t.get("headerRowEl")}if(!n(e)){if(e=e||t._getColumnsWidth(),!i)return;if(i>=e&&(e=i,r)){var s=6==l.ie||7==l.ie?B+2:B;e=i-s}}o.width(e)},setBodyWidth:function(e){var t=this,i=t.get("bodyEl");e=e||t._getInnerWidth(),i.width(e)},setBodyHeight:function(e){var t=this,i=t.get("bodyEl"),n=e,r=i.siblings();o.each(r,function(e){"none"!==$(e).css("display")&&(n-=$(e).outerHeight())}),i.height(n)},setColumnVisible:function(e){var t=this,i=!e.get("visible"),n=e.get("id"),r=t.get("tbodyEl"),o=$("."+S+n,r);i?o.hide():o.show()},updateItem:function(e){var t=this,i=t.getItems(),n=o.Array.indexOf(e,i),r=t._getColumns(),l=null;return n>=0?(l=t.findElement(e),o.each(r,function(i){var r=t.findCell(i.get("id"),$(l)),o=r.find("."+E),s=t._getCellText(i,e,n);o.html(s)}),l):void 0},showEmptyText:function(){var e=this,t=e.get("bodyEl"),i=e.get("emptyDataTpl"),n=e.get("emptyEl");n&&n.remove();var n=$(i).appendTo(t);e.set("emptyEl",n)},clearEmptyText:function(){var e=this,t=e.get("emptyEl");t&&t.remove()},_createHeaderRow:function(){var e,t=this,i=t._getColumns(),n=t.get("tbodyEl"),r=t.get("headerRowTpl"),l=[];return $.each(i,function(e,i){l.push(t._getHeaderCellTpl(i))}),t.get("useEmptyCell")&&l.push(t._getEmptyCellTpl()),r=o.substitute(r,{cellsTpl:l.join("")}),e=$(r).appendTo(n)},_getColumnsWidth:function(){var e=this,t=e.get("columns"),i=0;return o.each(t,function(e){e.get("visible")&&(i+=e.get("el").outerWidth())}),i},_getColumns:function(){return this.get("columns")},_getCellText:function(e,t,i){var n=this,r=e.get("dataIndex"),l=e.get("cellTpl")||n.get("cellTextTpl"),s=n._getCellInnerText(e,r,t,i);return o.substitute(l,{text:s,tips:n._getTips(e,r,t)})},_getCellInnerText:function(e,t,i,n){try{var r=e.get("renderer"),o=r?r(i[t],i,n):i[t];return null==o?"":o}catch(l){throw"column:"+e.get("title")+" fomat error!"}},_getCellTpl:function(e,t,i,n){var r=this,l=r._getCellText(e,i,n),s=r.get("cellTpl");return o.substitute(s,{elCls:e.get("elCls"),id:e.get("id"),dataIndex:t,cellText:l,hideCls:e.get("visible")?"":A})},_getEmptyCellTpl:function(){return'<td class="'+y+" "+R+'">&nbsp;</td>'},_getHeaderCellTpl:function(e){var t=this,i=t.get("headerCellTpl");return o.substitute(i,{id:e.get("id"),width:e.get("width"),hideCls:e.get("visible")?"":A})},_getInnerWidth:function(){return r(this.get("width"))},_getTips:function(e,t,i){var n=e.get("showTip"),r="";return n&&(r=i[t],o.isFunction(n)&&(r=n(r,i))),r},_uiSetInnerBorder:function(e){var t=this,i=t.get("el");e?i.addClass(v):i.removeClass(v)},_setTableTpl:function(e){var t=this,i=t.get("bodyEl");e=e||t.get("tableTpl"),$(e).appendTo(i);var n=i.find("table"),r=i.find("tbody");t.set("tableEl",n),t.set("tbodyEl",r),t.set("itemContainer",r),t._setTableCls(t.get("tableCls"))},_uiSetTableCls:function(e){this._setTableCls(e)},_uiSetHeight:function(e){{var t=this;t.get("bodyEl")}t.get("el").height(e),t.get("el").addClass(h)},_uiSetWidth:function(e){var t=this;t.get("el").width(e),t.setBodyWidth(t._getInnerWidth(e)),t.get("el").addClass(m)},_uiSetStripeRows:function(e){var t=this,i=e?"addClass":"removeClass";t.get("el")[i](C)},_setTableCls:function(e){var t=this,i=t.get("tableEl");i.attr("class",e)}},{ATTRS:{tableCls:{},bodyEl:{},tbodyEl:{},headerRowEl:{},tableEl:{},emptyEl:{}}},{xclass:"grid-view"}),V=a.SimpleList.extend({createDom:function(){var e=this,t=e.get("render"),i=$(t).width(),n=e.get("width");if(!n&&i){var r=e.getAppendWidth();e.set("width",i-r)}e.get("width")&&e.get("el").addClass(m),e.get("height")&&e.get("el").addClass(h),e.get("innerBorder")&&e.get("el").addClass(v)},renderUI:function(){var e=this;e._initHeader(),e._initBars(),e._initLoadMask(),e.get("view").resetHeaderRow()},bindUI:function(){var e=this;e._bindHeaderEvent(),e._bindBodyEvent(),e._bindItemsEvent()},addColumn:function(e,t){var i=this,n=i.get("header");return n?e=n.addColumn(e,t):(e=new u(e),i.get("columns").splice(t,0,e)),e},clearData:function(){this.clearItems()},getRecords:function(){return this.getItems()},findColumn:function(e){var t=this,i=t.get("header");return o.isNumber(e)?i.getColumnByIndex(e):i.getColumnById(e)},findColumnByField:function(e){var t=this,i=t.get("header");return i.getColumn(function(t){return t.get("dataIndex")===e})},findCell:function(e,t){var i=this,n=null;return n=t instanceof $?t:i.findRow(t),n?i.get("view").findCell(e,n):null},findRow:function(e){var t=this;return t.get("view").findRow(e)},removeColumn:function(e){var t=this;t.get("header").removeColumn(e)},showData:function(e){var t=this;t.set("items",e)},resetColumns:function(){var e=this,t=e.get("store");e.get("view").resetHeaderRow(),t&&e.onLoad()},_bindScrollEvent:function(){var e=this,t=e.get("el"),i=t.find("."+f),n=e.get("header");i.on("scroll",function(){var t=i.scrollLeft(),r=i.scrollTop();n.scrollTo({left:t,top:r}),e.fire("scroll",{scrollLeft:t,scrollTop:r,bodyWidth:i.width(),bodyHeight:i.height()})})},_bindHeaderEvent:function(){var e=this,t=e.get("header"),i=e.get("view"),n=e.get("store");t.on("afterWidthChange",function(e){var n=e.target;n!==t&&i.resetColumnsWidth(n)}),t.on("afterSortStateChange",function(e){var t=e.target,i=e.newVal;i&&n&&n.sort(t.get("dataIndex"),t.get("sortState"))}),t.on("afterVisibleChange",function(n){var r=n.target;r!==t&&(i.setColumnVisible(r),e.fire("columnvisiblechange",{column:r}))}),t.on("click",function(i){var n=i.target;n!==t&&e.fire("columnclick",{column:n,domTarget:i.domTarget})}),t.on("forceFitWidth",function(){e.get("rendered")&&e.resetColumns()}),t.on("add",function(t){e.get("rendered")&&(e.fire("columnadd",{column:t.column,index:t.index}),e.resetColumns())}),t.on("remove",function(t){e.get("rendered")&&(e.resetColumns(),e.fire("columnremoved",{column:t.column,index:t.index}))})},_bindBodyEvent:function(){var e=this;e._bindScrollEvent()},_bindItemsEvent:function(){function e(e){return{record:e.item,row:e.domTarget,domTarget:e.domTarget}}{var t=this;t.get("store")}t.on("itemsshow",function(){t.fire("aftershow")}),t.on("itemsclear",function(){t.fire("clear")}),t.on("itemclick",function(e){var i,n=e.domTarget,r=e.item,o=$(n).closest("."+y),l=$(n).closest("."+x);return o.length&&(i=t.fire("cellclick",{record:r,row:l[0],cell:o[0],field:o.attr(F),domTarget:n,domEvent:e.domEvent})),i===!1?i:t.fire("rowclick",{record:r,row:l[0],domTarget:n})}),t.on("itemunselected",function(i){t.fire("rowunselected",e(i))}),t.on("itemselected",function(i){t.fire("rowselected",e(i))}),t.on("itemrendered",function(i){t.fire("rowcreated",e(i))}),t.on("itemremoved",function(i){t.fire("rowremoved",e(i))}),t.on("itemupdated",function(i){t.fire("rowupdated",e(i))})},_getInnerWidth:function(e){return e=e||this.get("width"),r(e)},_initHeader:function(){var e=this,t=e.get("header"),i=e.get("el").find("."+g);t||(t=new d({columns:e.get("columns"),tableCls:e.get("tableCls"),forceFit:e.get("forceFit"),width:e._getInnerWidth(),render:i,parent:e}).render(),e.set("header",t))},_initBars:function(){var e=this,t=e.get("bbar"),i=e.get("tbar");e._initBar(t,b,"bbar"),e._initBar(i,p,"tbar")},_initBar:function(e,t,i){var n=this,r=null,l=null;if(e){if(e.xclass||e instanceof s.Controller||(e.xclass="bar",e.children=e.children||[],e.items&&(e.children.push({xclass:"bar",defaultChildClass:"bar-item-button",elCls:w,children:e.items}),e.items=null),e.pagingBar&&(r=n.get("store"),l={xclass:"pagingbar",store:r,pageSize:r.pageSize},e.pagingBar!==!0&&(l=o.merge(l,e.pagingBar)),e.children.push(l))),e.xclass){var a=n.get("el").find("."+t);a.show(),e.render=a,e.elTagName="div",e.autoRender=!0,e=n.addChild(e)}n.set(i,e)}return e},_initLoadMask:function(){var e=this,t=e.get("loadMask");t&&!t.show&&(t=new o.Mask.LoadMask({el:e.get("el")}),e.set("loadMask",t))},_uiSetWidth:function(e){var t=this;t.get("rendered")&&(n(e)?t.get("header").set("width","100%"):t.get("header").set("width",t._getInnerWidth(e))),t.get("view").setTableWidth()},_uiSetForceFit:function(e){var t=this;t.get("header").set("forceFit",e)},_uiSetHeight:function(e,t){var i=this,n=i.get("header");i.get("view").setBodyHeight(e),i.get("rendered")&&(i.get("forceFit")&&!t.prevVal&&(n.forceFitColumns(),i.get("view").setTableWidth()),n.setTableWidth())},onLoad:function(){var e=this,t=e.get("store");V.superclass.onLoad.call(this),e.get("emptyDataTpl")&&(t&&0==t.getCount()?e.get("view").showEmptyText():e.get("view").clearEmptyText())}},{ATTRS:{header:{},bbar:{},itemCls:{value:x},columns:{view:!0,value:[]},forceFit:{sync:!1,view:!0,value:!1},emptyDataTpl:{view:!0},headerRowTpl:{view:!0,value:'<tr class="'+c+'grid-header-row">{cellsTpl}</tr>'},headerCellTpl:{view:!0,value:'<td class="{hideCls} '+S+'{id}" width="{width}" style="height:0"></td>'},rowTpl:{view:!0,value:'<tr class="'+x+' {oddCls}">{cellsTpl}</tr>'},cellTpl:{view:!0,value:'<td  class="{elCls} {hideCls} '+y+" "+S+'{id}" data-column-id="{id}" data-column-field = "{dataIndex}" ><div class="'+E+'" >{cellText}</div></td>'},cellTextTpl:{view:!0,value:'<span class="'+I+' " title = "{tips}">{text}</span>'},events:{value:{aftershow:!1,clear:!1,cellclick:!1,columnclick:!1,rowclick:!1,rowcreated:!1,rowremoved:!1,rowselected:!1,rowunselected:!1,scroll:!1}},stripeRows:{view:!0,value:!0},tbar:{},tableCls:{view:!0,sync:!1,value:c+"grid-table"},tableTpl:{view:!0,value:'<table cellspacing="0" cellpadding="0" ><tbody></tbody></table>'},tpl:{value:'<div class="'+p+'" style="display:none"></div><div class="'+g+'"></div><div class="'+f+'"></div><div style="display:none" class="'+b+'"></div>'},innerBorder:{sync:!1,value:!0},useEmptyCell:{view:!0,value:!0},useHeaderRow:{view:!0,value:!0},xview:{value:W}}},{xclass:"grid"});V.View=W,i.exports=V}),define("bui-grid/1.1.0/src/column",["bui-common/1.1.0/common"],function(e,t,i){var n=e("bui-common/1.1.0/common"),r=n.prefix,o=r+"grid-hd-title",l=r+"grid-hd-open",s="sort-",a="ASC",d="DESC",u=r+"grid-hd-menu-trigger",c="grid-hd-menu-trigger",g=n.Component.View.extend({setTplContent:function(e){var t,i=this,n=i.get("sortTpl"),r=i.get("triggerTpl"),l=i.get("el");g.superclass.setTplContent.call(i,e),t=l.find("."+o),$(n).insertAfter(t),$(r).insertAfter(t)},_setContent:function(){this.setTplContent()},_uiSetShowMenu:function(e){var t=this,i=t.get("triggerTpl"),n=t.get("el"),r=n.find("."+o);e?$(i).insertAfter(r):n.find("."+u).remove()},_uiSetTitle:function(){this.get("rendered")&&this._setContent()},_uiSetDraggable:function(){this.get("rendered")&&this._setContent()},_uiSetSortable:function(){this.get("rendered")&&this._setContent()},_uiSetTpl:function(){this.get("rendered")&&this._setContent()},_uiSetSortState:function(e){var t=this,i=t.get("el"),n=s+"asc",r=s+"desc";i.removeClass(n+" "+r),"ASC"===e?i.addClass(n):"DESC"===e&&i.addClass(r)},_uiSetOpen:function(e){var t=this,i=t.get("el");e?i.addClass(l):i.removeClass(l)}},{ATTRS:{sortTpl:{view:!0,getter:function(){var e=this,t=e.get("sortable");return t?'<span class="'+r+'grid-sort-icon">&nbsp;</span>':""}},tpl:{}}}),f=n.Component.Controller.extend({_toggleSortState:function(){var e=this,t=e.get("sortState"),i=t&&t===a?d:a;e.set("sortState",i)},performActionInternal:function(e){var t=this,i=$(e.target),n=t.get("prefixCls");i.hasClass(n+c)||t.get("sortable")&&t._toggleSortState()},_uiSetWidth:function(e){e&&this.set("originWidth",e)}},{ATTRS:{elTagName:{value:"th"},open:{view:!0,value:!1},dataIndex:{view:!0,value:""},draggable:{sync:!1,view:!0,value:!0},editor:{},focusable:{value:!1},fixed:{value:!1},id:{},renderer:{},resizable:{value:!0},sortable:{sync:!1,view:!0,value:!0},sortState:{view:!0,value:null},title:{sync:!1,view:!0,value:"&#160;"},width:{value:100},showMenu:{view:!0,value:!1},triggerTpl:{view:!0,value:'<span class="'+u+'"></span>'},tpl:{sync:!1,view:!0,value:'<div class="'+r+'grid-hd-inner"><span class="'+o+'">{title}</span></div>'},cellTpl:{value:""},events:{value:{afterWidthChange:!0,afterSortStateChange:!0,afterVisibleChange:!0,click:!0,resize:!0,move:!0}},xview:{value:g}}},{xclass:"grid-hd",priority:1});f.Empty=f.extend({},{ATTRS:{type:{value:"empty"},sortable:{view:!0,value:!1},width:{view:!0,value:null},tpl:{view:!0,value:'<div class="'+r+'grid-hd-inner"></div>'}}},{xclass:"grid-hd-empty",priority:1}),i.exports=f}),define("bui-grid/1.1.0/src/header",["bui-common/1.1.0/common","bui-grid/1.1.0/src/column"],function(e,t,i){var n=e("bui-common/1.1.0/common"),r=n.prefix,o=(n.namespace("Grid"),e("bui-grid/1.1.0/src/column")),l=n.Component.View,s=n.Component.Controller,a=17,d=n.UA,u=l.extend({getContentElement:function(){return this.get("el").find("tr")},scrollTo:function(e){var t=this,i=t.get("el");void 0!==e.top&&i.scrollTop(e.top),void 0!==e.left&&i.scrollLeft(e.left)},_uiSetTableCls:function(e){var t=this,i=t.get("el").find("table");i.attr("class",e)}},{ATTRS:{emptyCellEl:{},tableCls:{}}},{xclass:"header-view"}),c=s.extend({addColumn:function(e,t){var i=this,n=t,r=i.get("columns");return e=i._createColumn(e),void 0===t&&(t=r.length,n=i.get("children").length-1),r.splice(t,0,e),i.addChild(e,n),i.fire("add",{column:e,index:t}),e},removeColumn:function(e){var t,i=this,r=i.get("columns");return e=n.isNumber(e)?r[e]:e,t=n.Array.indexOf(e,r),r.splice(t,1),i.fire("remove",{column:e,index:t}),i.removeChild(e,!0)},bindUI:function(){var e=this;e._bindColumnsEvent()},initializer:function(){var e,t=this,i=t.get("children"),n=t.get("columns");$.each(n,function(e,r){var o=t._createColumn(r);i[e]=o,n[e]=o}),e=t._createEmptyColumn(),i.push(e),t.set("emptyColumn",e)},getColumns:function(){return this.get("columns")},getColumnsWidth:function(){var e=this,t=e.getColumns(),i=0;return $.each(t,function(e,t){t.get("visible")&&(i+=t.get("el").outerWidth())}),i},getColumnOriginWidth:function(){var e=this,t=e.getColumns(),i=0;return $.each(t,function(e,t){if(t.get("visible")){var n=t.get("originWidth")||t.get("width");i+=n}}),i},getColumnByIndex:function(e){var t=this,i=t.getColumns(),n=i[e];return n},getColumn:function(e){var t=this,i=t.getColumns(),n=null;return $.each(i,function(t,i){return e(i)?(n=i,!1):void 0}),n},getColumnById:function(e){var t=this;return t.getColumn(function(t){return t.get("id")===e})},getColumnIndex:function(e){var t=this,i=t.getColumns();return n.Array.indexOf(e,i)},scrollTo:function(e){this.get("view").scrollTo(e)},_bindColumnsEvent:function(){var e=this;e.on("afterWidthChange",function(t){var i=t.target;i!==e&&e.setTableWidth()}),e.on("afterVisibleChange",function(t){var i=t.target;i!==e&&e.setTableWidth()}),e.on("afterSortStateChange",function(t){var i=t.target,n=e.getColumns(),r=t.newVal;r&&$.each(n,function(e,t){t!==i&&t.set("sortState","")})}),e.on("add",function(){e.setTableWidth()}),e.on("remove",function(){e.setTableWidth()})},_createColumn:function(e){return e instanceof o?e:(e.id||(e.id=n.guid("col")),new o(e))},_createEmptyColumn:function(){return new o.Empty},_isAllowScrollLeft:function(){var e=this,t=e.get("parent");return t&&!!t.get("height")},forceFitColumns:function(){function e(e,t){var i=e.get("el");e.set("width",t,{silent:1}),i.width(t)}var t=this,i=t.getColumns(),n=t.get("width"),r=n,o=t.getColumnOriginWidth(),l=0,s=0,d=null,u=t._isAllowScrollLeft();if(n){u&&(n-=a,r=n);var c=0;$.each(i,function(e,t){if(t.get("visible")&&t.get("resizable")&&c++,t.get("visible")&&!t.get("resizable")){var i=t.get("el").outerWidth();r-=i,o-=i}});var g=Math.floor(r/c),f=r/o;if(1===f)return;$.each(i,function(i,n){if(n.get("visible")&&n.get("resizable")){var r=t._getColumnBorderWith(n,i),o=n.get("originWidth");o||(n.set("originWidth",n.get("width")),o=n.get("width")),g=Math.floor((o+r)*f),e(n,g-r),l+=g,d=n}}),d&&(s=r-l,e(d,d.get("width")+s)),t.fire("forceFitWidth")}},_getColumnBorderWith:function(e,t){var i=e.get("el"),n=Math.round(parseFloat(i.css("border-left-width"))||0)+Math.round(parseFloat(i.css("border-right-width"))||0);return n=d.ie&&d.ie<8&&0===t?1:n},setTableWidth:function(){var e=this,t=e.get("width"),i=0,n=null;"auto"!=t&&(e.get("forceFit")?e.forceFitColumns():e._isAllowScrollLeft()&&(i=e.getColumnsWidth(),n=e.get("emptyColumn"),n.get("el").width(i>t?a:"auto")))},_uiSetWidth:function(){var e=this;e.setTableWidth()},_uiSetForceFit:function(e){var t=this;e&&t.setTableWidth()}},{ATTRS:{columns:{value:[]},emptyColumn:{},focusable:{value:!1},forceFit:{sync:!1,view:!0,value:!1},tpl:{view:!0,value:'<table cellspacing="0" class="'+r+'grid-table" cellpadding="0"><thead><tr></tr></thead></table>'},tableCls:{view:!0},xview:{value:u},events:{value:{add:!1,remove:!1}}}},{xclass:"grid-header",priority:1});i.exports=c}),define("bui-grid/1.1.0/src/format",[],function(e,t,i){function n(e){return 10>e?"0"+e:e}var r={dateRenderer:function(e){if(!e)return"";if(BUI.isString(e))return e;var t=null;try{t=new Date(e)}catch(i){return""}return t&&t.getFullYear?t.getFullYear()+"-"+n(t.getMonth()+1)+"-"+n(t.getDate()):""},datetimeRenderer:function(e){if(!e)return"";if(BUI.isString(e))return e;var t=null;try{t=new Date(e)}catch(i){return""}return t&&t.getFullYear?t.getFullYear()+"-"+n(t.getMonth()+1)+"-"+n(t.getDate())+" "+n(t.getHours())+":"+n(t.getMinutes())+":"+n(t.getSeconds()):""},cutTextRenderer:function(e){return function(t){return t=t||"",t.toString().length>e?t.toString().substring(0,e)+"...":t}},enumRenderer:function(e){return function(t){return e[t]||""}},multipleItemsRenderer:function(e){var t=r.enumRenderer(e);return function(e){var i=[];return e?(BUI.isArray(e)||(e=e.toString().split(",")),$.each(e,function(e,n){i.push(t(n))}),i.join(",")):""}},moneyCentRenderer:function(e){return BUI.isString(e)&&(e=parseFloat(e)),$.isNumberic(e)?(.01*e).toFixed(2):e}};i.exports=r}),define("bui-grid/1.1.0/src/plugins/base",["bui-common/1.1.0/common","bui-grid/1.1.0/src/plugins/selection","bui-grid/1.1.0/src/plugins/cascade","bui-grid/1.1.0/src/plugins/cellediting","bui-grid/1.1.0/src/plugins/rowediting","bui-grid/1.1.0/src/plugins/dialog","bui-grid/1.1.0/src/plugins/autofit","bui-grid/1.1.0/src/plugins/gridmenu","bui-grid/1.1.0/src/plugins/summary","bui-grid/1.1.0/src/plugins/rownumber","bui-grid/1.1.0/src/plugins/columngroup","bui-grid/1.1.0/src/plugins/rowgroup","bui-grid/1.1.0/src/plugins/columnresize","bui-grid/1.1.0/src/plugins/editing","bui-menu/1.1.0/index"],function(e,t,i){var n=e("bui-common/1.1.0/common"),r=e("bui-grid/1.1.0/src/plugins/selection"),o={};n.mix(o,{CheckSelection:r.CheckSelection,RadioSelection:r.RadioSelection,Cascade:e("bui-grid/1.1.0/src/plugins/cascade"),CellEditing:e("bui-grid/1.1.0/src/plugins/cellediting"),RowEditing:e("bui-grid/1.1.0/src/plugins/rowediting"),DialogEditing:e("bui-grid/1.1.0/src/plugins/dialog"),AutoFit:e("bui-grid/1.1.0/src/plugins/autofit"),GridMenu:e("bui-grid/1.1.0/src/plugins/gridmenu"),Summary:e("bui-grid/1.1.0/src/plugins/summary"),RowNumber:e("bui-grid/1.1.0/src/plugins/rownumber"),ColumnGroup:e("bui-grid/1.1.0/src/plugins/columngroup"),RowGroup:e("bui-grid/1.1.0/src/plugins/rowgroup"),ColumnResize:e("bui-grid/1.1.0/src/plugins/columnresize")}),i.exports=o}),define("bui-grid/1.1.0/src/plugins/selection",["bui-common/1.1.0/common"],function(e,t,i){function n(e){n.superclass.constructor.call(this,e)}var r=e("bui-common/1.1.0/common"),o=r.prefix,l=o+"grid-checkBox",s="x-grid-checkbox",a=o+"grid-radio";r.extend(n,r.Base),n.ATTRS={width:{value:40},column:{},cellInner:{value:'<div class="'+l+'-container"><span class="'+s+'"></span></div>'}},r.augment(n,{createDom:function(e){var t=this,i={title:"",width:t.get("width"),fixed:!0,resizable:!1,sortable:!1,tpl:'<div class="'+o+'grid-hd-inner">'+t.get("cellInner"),cellTpl:t.get("cellInner")},n=e.addColumn(i,0);e.set("multipleSelect",!0),t.set("column",n)},bindUI:function(e){var t=this,i=t.get("column"),n=i.get("el"),r=n.find("."+s);r.on("click",function(){var t=n.hasClass("checked");t?(e.clearSelection(),n.removeClass("checked")):(e.setAllSelection(),n.addClass("checked"))}),e.on("rowunselected",function(){n.removeClass("checked")}),e.on("clear",function(){n.removeClass("checked")})}});var d=function(e){d.superclass.constructor.call(this,e)};r.extend(d,r.Base),d.ATTRS={width:{value:40},column:{},cellInner:{value:'<div class="'+o+'grid-radio-container"><input  class="'+a+'" type="radio"></div>'}},r.augment(d,{createDom:function(e){var t=this,i={title:"",width:t.get("width"),resizable:!1,fixed:!0,sortable:!1,cellTpl:t.get("cellInner")},n=e.addColumn(i,0);e.set("multipleSelect",!1),t.set("column",n)},bindUI:function(e){var t=this;e.on("rowselected",function(e){t._setRowChecked(e.row,!0)}),e.on("rowunselected",function(e){t._setRowChecked(e.row,!1)})},_setRowChecked:function(e,t){var i=$(e),n=i.find("."+a);n.attr("checked",t)}});var u={CheckSelection:n,RadioSelection:d};i.exports=u}),define("bui-grid/1.1.0/src/plugins/cascade",["bui-common/1.1.0/common"],function(e,t,i){var n=e("bui-common/1.1.0/common"),r=n.prefix,o="data-record",l=r+"grid-cascade",s=l+"-expand",a=l+"-row",d=l+"-cell",u=l+"-collapse",c=function(e){c.superclass.constructor.call(this,e)};n.extend(c,n.Base),c.ATTRS={width:{value:40},cellInner:{value:'<span class="'+l+'"><i class="'+l+'-icon"></i></span>'},rowTpl:{value:'<tr class="'+a+'"><td class="'+d+'"></td></tr>'},renderer:{},events:["expand","collapse","removed"]},n.augment(c,{initializer:function(e){{var t=this,i={title:"",elCls:"center",width:t.get("width"),resizable:!1,fixed:!0,sortable:!1,cellTpl:t.get("cellInner")};e.addColumn(i,0)}e.set("innerBorder",!1),t.set("grid",e)},bindUI:function(e){var t=this;e.on("cellclick",function(e){var i=$(e.domTarget),n=i.closest("."+l);n.length&&(n.hasClass(s)?t._onCollapse(e.record,e.row,n):t._onExpand(e.record,e.row,n))}),e.on("columnvisiblechange",function(){t._resetColspan()}),e.on("rowremoved",function(e){t.remove(e.record)}),e.on("clear",function(){t.removeAll()})},expandAll:function(){var e=this,t=e.get("grid"),i=t.getRecords();$.each(i,function(t,i){e.expand(i)})},expand:function(e){var t=this,i=t.get("grid"),n=i.findRow(e);n&&t._onExpand(e,n)},collapse:function(e){var t=this,i=t.get("grid"),n=i.findRow(e);n&&t._onCollapse(e,n)},removeAll:function(){var e=this,t=e._getAllCascadeRows();t.each(function(t,i){e._removeCascadeRow(i)})},remove:function(e){var t=this,i=t._findCascadeRow(e);i&&t._removeCascadeRow(i)},collapseAll:function(){var e=this,t=e.get("grid"),i=t.getRecords();$.each(i,function(t,i){e.collapse(i)})},_getRowRecord:function(e){return $(e).data(o)},_removeCascadeRow:function(e){this.fire("removed",{record:$(e).data(o),row:e}),$(e).remove()},_findCascadeRow:function(e){var t=this,i=t._getAllCascadeRows(),n=null;return $.each(i,function(i,r){return t._getRowRecord(r)===e?(n=r,!1):void 0}),n},_getAllCascadeRows:function(){var e=this,t=e.get("grid");return t.get("el").find("."+a)},_getCascadeRow:function(e){var t=$(e).next();return t.hasClass(a)?t:null},_getRowContent:function(e){var t=this,i=t.get("renderer"),n=i?i(e):"";return n},_createCascadeRow:function(e,t){var i=this,n=i.get("rowTpl"),r=i._getRowContent(e),l=$(n).insertAfter(t);return l.find("."+d).append($(r)),l.data(o,e),l},_onExpand:function(e,t,i){{var n=this,r=n._getCascadeRow(t);n._getColumnCount(t)}i=i||$(t).find("."+l),i.addClass(s),r&&r.length||(r=n._createCascadeRow(e,t)),$(r).removeClass(u),n._setColSpan(r,t),n.fire("expand",{record:e,row:r[0]})},_onCollapse:function(e,t,i){var n=this,r=n._getCascadeRow(t);i=i||$(t).find("."+l),i.removeClass(s),(r||!r.length)&&($(r).addClass(u),n.fire("collapse",{record:e,row:r[0]}))},_getColumnCount:function(e){return $(e).children().filter(function(){return"none"!==$(this).css("display")}).length},_setColSpan:function(e,t){t=t||$(e).prev();var i=this,n=i._getColumnCount(t);$(e).find("."+d).attr("colspan",n)},_resetColspan:function(){var e=this,t=e._getAllCascadeRows();$.each(t,function(t,i){e._setColSpan(i)})},destructor:function(){var e=this;e.removeAll(),e.off(),e.clearAttrVals()}}),i.exports=c}),define("bui-grid/1.1.0/src/plugins/cellediting",["bui-grid/1.1.0/src/plugins/editing"],function(e,t,i){var n=e("bui-grid/1.1.0/src/plugins/editing"),r=BUI.prefix+"grid-body",o=BUI.prefix+"grid-cell",l=function(e){l.superclass.constructor.call(this,e)};l.ATTRS={triggerCls:{value:o}},BUI.extend(l,n),BUI.augment(l,{getEditorCfgs:function(e){var t=this,i=t.get("grid"),n=i.get("el").find("."+r),o=[];return BUI.each(e,function(e){var t={field:e,changeSourceEvent:null,hideExceptNode:n,autoUpdate:!1,preventHide:!1,editableFn:e.editableFn};"checkbox"===e.xtype&&(t.innerValueField="checked"),o.push(t)}),o},getEditor:function(e){if(!e)return null;var t=this,i=t.get("editors"),n=null;return BUI.each(i,function(t){return t.get("field").get("name")===e?(n=t,!1):void 0}),n},beforeShowEditor:function(e,t){var i=this,n=$(t.cell);i.resetWidth(e,n.outerWidth()),i._makeEnable(e,t)},_makeEnable:function(e,t){var i,n,r,o=e.get("editableFn");BUI.isFunction(o)&&(i=t.field,r=t.record,r&&i&&(n=o(r[i],r),n?e.get("field").enable():e.get("field").disable()))},resetWidth:function(e,t){e.set("width",t)},updateRecord:function(e,t,i){var n=i.getValue(),r=i.get("field").get("name"),o=t[r];n=BUI.isDate(n)?n.getTime():n,o!==n&&e.setValue(t,r,n)},getAlignNode:function(e){return $(e.cell)},getFields:function(){var e=[],t=this,i=t.get("editors");return BUI.each(i,function(t){e.push(t.get("field"))}),e},getEditValue:function(e){if(e.record&&e.field){var t=e.record[e.field];return null==t?"":t}return""}}),i.exports=l}),define("bui-grid/1.1.0/src/plugins/rowediting",["bui-common/1.1.0/common","bui-grid/1.1.0/src/plugins/editing"],function(e,t,i){var n=e("bui-common/1.1.0/common"),r=e("bui-grid/1.1.0/src/plugins/editing"),o=n.prefix+"grid-row",l=function(e){l.superclass.constructor.call(this,e)};l.ATTRS={autoSave:{value:!1},align:{value:{points:["tl","tl"],offset:[-2,0]}},triggerCls:{value:o},editor:{}},n.extend(l,r),n.augment(l,{getEditorCfgs:function(e){var t=this,i=t.get("editor"),r=[],o=n.mix(!0,{changeSourceEvent:null,autoUpdate:!1,form:{children:e,buttonBar:{elCls:"centered toolbar"}}},i);return r.push(o),r},wrapValidator:function(e){var t=this;return function(i){var n=t.get("curEditor"),r=t.get("record"),o=n?n.getValue():r;return o?e(i,o,r):void 0}},focusEditor:function(e,t){var i=e.get("form"),n=i.getField(t);n&&n.focus()},getFieldConfig:function(e){var t=e.get("editor");if(t)return"checkbox"===t.xtype&&(t.innerValueField="checked"),t;var i={xtype:"plain"};return e.get("dataIndex")&&e.get("renderer")&&(i.renderer=e.get("renderer")),i
},updateRecord:function(e,t,i){var r=this,o=i.getValue();n.each(o,function(e,t){n.isDate(e)&&(o[t]=e.getTime())}),n.mix(t,o),e.update(t),r.get("autoSave")&&e.save(t)},getEditor:function(){var e=this,t=e.get("editors");return t[0]},onColumnVisibleChange:function(e){var t=this,i=e.get("id"),n=t.getEditor(),r=n.getChild(i,!0);r&&r.set("visible",e.get("visible"))},beforeShowEditor:function(e,t){var i=this,r=i.get("grid"),o=r.get("columns"),l=e.get("form"),s=$(t.row);e.set("width",s.width()),n.each(o,function(e){var t=e.get("dataIndex"),i=l.getField(t);if(e.get("visible")){var n=e.get("el").outerWidth()-i.getAppendWidth();i.set("width",n)}else i&&i.set("visible",!1)})},getEditValue:function(e){return e.record},getEditorConstructor:function(e){return e.RecordEditor},getAlignNode:function(e){return $(e.row)},getFields:function(){var e=this,t=e.get("editors");return t[0].get("form").get("children")}}),i.exports=l}),define("bui-grid/1.1.0/src/plugins/dialog",["bui-common/1.1.0/common"],function(e,t,i){function n(e){n.superclass.constructor.call(this,e)}var r=e("bui-common/1.1.0/common"),o="add",l="edit";n.ATTRS={autoSave:{value:!1},record:{},curIndex:{},contentId:{},editor:{},form:{},events:{value:{recordchange:!1}},editType:{}},r.extend(n,r.Base),r.augment(n,{initializer:function(e){var t=this;t.set("grid",e),r.use("bui/editor",function(e){t._initEditor(e),t.fire("editorready")})},bindUI:function(e){var t=this,i=t.get("triggerCls");i&&e.on("cellclick",function(n){var r=$(n.domTarget),o=t.get("editor");return r.hasClass(i)&&o&&(t.edit(n.record),e.get("multipleSelect"))?!1:void 0})},_initEditor:function(e){var t=this,i=t.get("contentId"),n=$("#"+i).find("form"),o=t.get("editor"),l=r.merge(o,{contentId:i,form:{srcNode:n}});o=new e.DialogEditor(l),t._bindEditor(o),t.set("editor",o),t.set("form",o.get("form"))},_bindEditor:function(e){var t=this;e.on("accept",function(){var i=e.get("form"),n=i.serializeToObject();t.saveRecord(n),t.fire("accept",{editor:e,record:t.get("record"),form:i})}),e.on("cancel",function(){t.fire("cancel",{editor:e,record:t.get("record"),form:e.get("form")})})},edit:function(e){var t=this;t.set("editType",l),t.showEditor(e)},add:function(e,t){var i=this;i.set("editType",o),i.set("curIndex",t),i.showEditor(e)},saveRecord:function(e){var t=this,i=t.get("grid"),n=t.get("editType"),l=t.get("curIndex"),s=i.get("store"),a=t.get("record");r.mix(a,e),n==o?null!=l?s.addAt(a,l):s.add(a):s.update(a),t.get("autoSave")&&s.save(a)},showEditor:function(e){var t=this,i=t.get("editor");t.set("record",e),i.show(),i.setValue(e,!0),t.fire("recordchange",{record:e,editType:t.get("editType")}),t.fire("editorshow",{eidtor:i,editType:t.get("editType")})},cancel:function(){var e=this,t=e.get("editor");t.cancel()},destructor:function(){var e=this,t=e.get("editor");t&&t.destroy(),e.off(),e.clearAttrVals()}}),i.exports=n}),define("bui-grid/1.1.0/src/plugins/autofit",["bui-common/1.1.0/common"],function(e,t,i){var n=e("bui-common/1.1.0/common"),r=(n.UA,function(e){r.superclass.constructor.call(this,e)});n.extend(r,n.Base),r.ATTRS={},n.augment(r,{bindUI:function(e){var t,i=this;$(window).on("resize",function(){function n(){clearTimeout(t),t=setTimeout(function(){i._autoFit(e)},100),i.set("handler",t)}n()})},_autoFit:function(e){for(var t=($(e.get("render")),$(window).width()),i=0,n=e.get("el").parent();n[0]&&n[0]!=$("body")[0];)i+=n.outerWidth()-n.width(),n=n.parent();e.set("width",t-i)}}),i.exports=r}),define("bui-grid/1.1.0/src/plugins/gridmenu",["bui-common/1.1.0/common","bui-menu/1.1.0/index"],function(e,t,i){var n=e("bui-common/1.1.0/common"),r=e("bui-menu/1.1.0/index"),o=n.prefix,l="sort-asc",s="sort-desc",a="column-setting",d=function(e){d.superclass.constructor.call(this,e)};n.extend(d,n.Base),d.ATTRS={menu:{},activedColumn:{},triggerCls:{value:o+"grid-hd-menu-trigger"},items:{value:[{id:l,text:"升序",iconCls:"icon-arrow-up"},{id:s,text:"降序",iconCls:"icon-arrow-down"},{xclass:"menu-item-sparator"},{id:a,text:"设置列",iconCls:"icon-list-alt"}]}},n.augment(d,{initializer:function(e){var t=this;t.set("grid",e)},renderUI:function(e){var t=this,i=e.get("columns");n.each(i,function(e){t._addShowMenu(e)})},bindUI:function(e){var t=this;e.on("columnadd",function(e){t._addShowMenu(e.column)}),e.on("columnclick",function(e){var i,n=$(e.domTarget),r=e.column;t.set("activedColumn",r),n.hasClass(t.get("triggerCls"))&&(i=t.get("menu")||t._initMenu(),i.set("align",{node:n,points:["bl","tl"],offset:[0,0]}),i.show(),t._afterShow(r,i))})},_addShowMenu:function(e){e.get("fixed")||e.set("showMenu",!0)},_afterShow:function(e,t){{var i=this;i.get("grid")}t=t||i.get("menu"),i._resetSortMenuItems(e,t),i._resetColumnsVisible(t)},_resetColumnsVisible:function(e){var t=this,i=e.findItemById(a),n=i.get("subMenu")||t._initColumnsMenu(i),r=t.get("grid").get("columns");n.removeChildren(!0),$.each(r,function(e,t){if(!t.get("fixed")){var i={xclass:"context-menu-item",text:t.get("title"),column:t,iconCls:"icon"},r=n.addChild(i);t.get("visible")&&r.set("selected",!0)}})},_resetSortMenuItems:function(e,t){var i=t.findItemById(l),n=t.findItemById(s);e.get("sortable")?(i.set("disabled",!1),n.set("disabled",!1)):(i.set("disabled",!0),n.set("disabled",!0))},_initMenu:function(){var e,t=this,i=t.get("menu");return i||(e=t.get("items"),$.each(e,function(e,t){t.xclass||(t.xclass="context-menu-item")}),i=new r.ContextMenu({children:e,elCls:"grid-menu"}),t._initMenuEvent(i),t.set("menu",i)),i},_initMenuEvent:function(e){var t=this;e.on("itemclick",function(e){var i=e.item,n=i.get("id"),r=t.get("activedColumn");n===l?r.set("sortState","ASC"):n===s&&r.set("sortState","DESC")}),e.on("afterVisibleChange",function(e){var i=e.newVal,n=t.get("activedColumn");i&&n?n.set("open",!0):n.set("open",!1)})},_initColumnsMenu:function(e){var t=new r.ContextMenu({multipleSelect:!0,elCls:"grid-column-menu"});return e.set("subMenu",t),t.on("itemclick",function(e){var t=e.item,i=t.get("column"),n=t.get("selected");n?i.set("visible",!0):i.set("visible",!1)}),t},destructor:function(){var e=this,t=e.get("menu");t&&t.destroy(),e.off(),e.clearAttrVals()}}),i.exports=d}),define("bui-grid/1.1.0/src/plugins/summary",["bui-common/1.1.0/common"],function(e,t,i){function n(e){return e>0?'<td class="'+h+'" colspan="'+e+'">&nbsp;</td>':""}function r(e,t){return'<td class="'+h+" "+f+t+'">'+o(e)+"</td>"}function o(e){return'<div class="'+g+'" ><span class="'+m+' ">'+e+"</span></div>"}function l(){return'<td class="'+h+" "+h+'-empty">&nbsp;</td>'}var s=e("bui-common/1.1.0/common"),a=s.prefix,d=a+"grid-row",u=a+"grid-body",c=a+"grid-summary-row",g=a+"grid-cell-inner",f="grid-td-",m=a+"grid-cell-text",h=a+"grid-cell",v=function(e){v.superclass.constructor.call(this,e)};v.ATTRS={footerTpl:{value:"<tfoot></tfoot>"},footerEl:{},summaryTitle:{value:"查询合计"},pageSummaryTitle:{value:"本页合计"},field:{value:"summary"},pageSummaryField:{value:"pageSummary"},summaryField:{value:"summary"},pageSummary:{},summary:{}},s.extend(v,s.Base),s.augment(v,{initializer:function(e){var t=this;t.set("grid",e)},renderUI:function(e){var t=this,i=e.get("el").find("."+u),n=i.find("table"),r=$(t.get("footerTpl")).appendTo(n);t.set("footerEl",r)},bindUI:function(e){var t=this,i=e.get("store");i&&(i.on("beforeprocessload",function(e){t._processSummary(e.data)}),i.on("add",function(){t.resetPageSummary()}),i.on("remove",function(){t.resetPageSummary()}),i.on("update",function(){t.resetPageSummary()})),e.on("aftershow",function(){t.resetSummary()}),e.get("header").on("afterVisibleChange",function(){t.resetSummary()})},_processSummary:function(e){var t=this,i=t.get("footerEl");if(i.empty(),e){var n=e[t.get("pageSummaryField")],r=e[t.get("summaryField")];t.set("pageSummary",n),t.set("summary",r)}},resetPageSummary:function(){var e=this,t=e.get("grid"),i=t.get("columns"),n=e._calculatePageSummary(),r=e.get("pageEl");e.set("pageSummary",n),r&&(s.each(i,function(t){if(t.get("summary")&&t.get("visible")){var i=t.get("id"),o=r.find("."+f+i),l=e._getSummaryCellText(t,n);o.find("."+m).text(l)}}),e._updateFirstRow(r,e.get("pageSummaryTitle")))},resetSummary:function(e,t){var i=this,n=i.get("footerEl"),r=null;n.empty(),e=e||i.get("pageSummary"),e||(e=i._calculatePageSummary(),i.set("pageSummary",e)),t=t||i.get("summary"),r=i._creatSummaryRow(e,i.get("pageSummaryTitle")),i.set("pageEl",r),i._creatSummaryRow(t,i.get("summaryTitle"))},_creatSummaryRow:function(e,t){if(!e)return null;var i=this,n=i.get("footerEl"),r=i._getSummaryTpl(e),o=$(r).appendTo(n);return i._updateFirstRow(o,t),o},_updateFirstRow:function(e,t){var i=e.find("td").first(),n=i.find("."+g);if(n.length){var r=t+": ";text=n.text(),-1===text.indexOf(r)&&(text=r+text),i.html(o(text))}else i.html(o(t+":"))},_getSummaryTpl:function(e){var t=this,i=t.get("grid"),o=i.get("columns"),s=[],a=-1,u=-1,g=null;return $.each(o,function(i,o){if(o.get("visible")&&(u+=1,o.get("summary"))){s.push(n(u-a-1));var l=t._getSummaryCellText(o,e),d=r(l,o.get("id"));s.push(d),a=u}}),a!==u&&s.push(n(u-a)),g=['<tr class="',c," ",d,'">',s.join(""),l(),"</tr>"].join("")},_getSummaryCellText:function(e,t){var i=t[e.get("dataIndex")],n=null==i?"":i,r=e.get("renderer"),o=r?r(n,t):n;return o},_calculatePageSummary:function(){var e=this,t=e.get("grid"),i=t.get("store"),n=t.get("columns"),r={};return s.each(n,function(e){if(e.get("summary")){var t=e.get("dataIndex");r[t]=i.sum(t)}}),r}}),i.exports=v}),define("bui-grid/1.1.0/src/plugins/rownumber",[],function(e,t,i){function n(e){n.superclass.constructor.call(this,e)}var r="x-grid-rownumber";BUI.extend(n,BUI.Base),n.ATTRS={width:{value:40},column:{}},BUI.augment(n,{createDom:function(e){var t=this,i={title:"",width:t.get("width"),fixed:!0,resizable:!1,sortable:!1,renderer:function(e,t,i){return i+1},elCls:r},n=e.addColumn(i,0);t.set("column",n)}}),i.exports=n}),define("bui-grid/1.1.0/src/plugins/columngroup",["bui-common/1.1.0/common"],function(e,t,i){var n=e("bui-common/1.1.0/common"),r=n.prefix,o=r+"grid-hd-title",l=r+"grid-column-group",s=r+"grid-group-header",a=r+"grid-db-hd",d=function(e){d.superclass.constructor.call(this,e)};d.ATTRS={groups:{value:[]},columnTpl:{value:'<th class="bui-grid-hd center" colspan="{colspan}"><div class="'+r+'grid-hd-inner"><span class="'+o+'">{title}</span></div></th>'}},n.extend(d,n.Base),n.augment(d,{renderUI:function(e){var t=this,i=t.get("groups"),r=e.get("header"),o=r.get("el"),d=r.get("children"),u=$('<tr class="'+l+'"></tr>').prependTo(o.find("thead"));o.addClass(s),n.each(i,function(e){var i=t._getGroupTpl(e),n=$(i).appendTo(u);e.el=n;for(var r=e.from;r<=e.to;r++){var o=d[r];o&&o.set("group",e)}});for(var c,g=d.length-1;g>=0;g--){var f=d[g],m=f.get("group");if(m)c=m.el;else{var h=f.get("el");h.addClass(a),h.attr("rowspan",2),c?h.insertBefore(c):h.appendTo(u),c=h}}if(0!==i[0].from){var v=d[i[0].from];v&&v.get("el").css("border-left-width",1)}},_getGroupTpl:function(e){var t=this,i=t.get("columnTpl"),r=e.to-e.from+1;return n.substitute(i,{colspan:r,title:e.title})}}),i.exports=d}),define("bui-grid/1.1.0/src/plugins/rowgroup",["bui-common/1.1.0/common"],function(e,t,i){function n(e,t){return{items:[],value:e,text:t}}var r=e("bui-common/1.1.0/common"),o="data-group",l=r.prefix,s=l+"grid-row-group",a=l+"grid-cascade",d=l+"grid-cascade-expand",u=function(e){u.superclass.constructor.call(this,e)};u.ATTRS={groups:{shared:!1,value:[]},renderer:{}},r.extend(u,r.Base),r.augment(u,{renderUI:function(e){var t=this,i=e.get("el").find("tbody");t.set("grid",e),t.set("tbodyEl",i)},bindUI:function(e){var t=this,i=[];e.on("aftershow",function(){var o=e.getItems(),l=t._getSortColumn();if(t._clear(),l){e.get("view").getAllElements().hide();var s=l.get("dataIndex");r.each(o,function(e,r){var o,a=i[i.length-1],d=l.get("renderer"),u=e[s];if(!a||u!=a.value){o=d?d(u,e):u;var c=n(u,o);c.begin=r,i.push(c),a&&t._createGroup(a),a=c}a.items.push(e)});var a=i[i.length-1];a&&t._createGroup(a),t.set("groups",i)}}),e.on("clear",function(){t._clear()}),t.get("tbodyEl").delegate("."+a,"click",function(e){var i=$(e.currentTarget),n=t._getGroupData(i);i.hasClass(d)?(t._collapse(n),i.removeClass(d)):(t._expand(n),i.addClass(d))})},_getSortColumn:function(){var e=this,t=e.get("grid"),i=t.get("store"),n=i.get("sortField");return t.findColumnByField(n)},_getGroupData:function(e){var t=e.closest("."+s);return t.data(o)},_createGroup:function(e){var t=this,i=t.get("grid"),n=e.items[0],r=i.findElement(n),l=i.get("columns").length,a=t.get("renderer"),d=a?a(e.text,e):e.text,u='<tr class="'+s+'"><td colspan="'+(l+1)+'"><div class="bui-grid-cell-inner"><span class="bui-grid-cell-text"><span class="bui-grid-cascade"><i class="bui-grid-cascade-icon"></i></span> '+d+"</span></div></td></tr>",c=$(u).insertBefore(r);c.data(o,e)},_getGroupedElements:function(e){for(var t=this,i=t.get("grid"),n=i.get("view").getAllElements(),r=e.begin,o=e.items.length+r,l=[],s=r;o>s;s++)l.push(n[s]);return $(l)},_expand:function(e){var t=this,i=t._getGroupedElements(e);i.show()},_collapse:function(e){var t=this,i=t._getGroupedElements(e);i.hide()},_clear:function(){var e=this,t=e.get("groups"),i=e.get("tbodyEl");r.Array.empty(t),i.find("."+s).remove()}}),i.exports=u}),define("bui-grid/1.1.0/src/plugins/columnresize",["bui-common/1.1.0/common"],function(e,t,i){var n=e("bui-common/1.1.0/common"),r=15,o=30,l="col-resize",s=function(e){s.superclass.constructor.call(this,e)};s.ATTRS={resizing:{value:!1},draging:{}},n.extend(s,n.Base),n.augment(s,{renderUI:function(e){this.set("grid",e)},bindUI:function(e){function t(){var i=d.get("draging");if(n&&i){var r=a>0?n:s,o=r.get("width"),l=i.end-i.start;if(d.hideDrag(),e.get("forceFit")){var u=r.get("originWidth"),c=o/u,g=(o+l)/c;r.set("originWidth",g),r.set("width",g)}else r.set("width",o+l)}$(document).off("mouseup",t)}function i(){$(document).on("mouseup",t)}var n,s,a,d=this,u=e.get("header");u.get("el").delegate(".bui-grid-hd","mouseenter",function(e){var t=d.get("resizing");if(!t){var i=e.currentTarget;n=d._getColumn(i),s=d._getPreCol(n)}}).delegate(".bui-grid-hd","mouseleave",function(){var e=d.get("resizing");!e&&n&&(n.get("el").css("cursor",""),n=null)}).delegate(".bui-grid-hd","mousemove",function(t){var i=d.get("resizing");if(!i&&n){var u=n.get("el"),c=t.pageX,g=u.offset(),f=g.left,m=u.width();r>c-f&&s?(u.css("cursor",l),a=-1):r>f+m-c?(a=1,u.css("cursor",l)):n.get("el").css("cursor","")}if(i){t.preventDefault();var h=d.get("draging"),v=h.start,c=t.pageX,p=c-v,m=a>0?n.get("width"):s.get("width"),b=m+p;b>o&&b<e.get("el").width()&&(h.end=c,d.moveDrag(c))}}).delegate(".bui-grid-hd","mousedown",function(e){var t=d.get("resizing");!t&&n&&n.get("el").css("cursor")==l&&(e.preventDefault(),d.showDrag(e.pageX),i())})},showDrag:function(e){var t=this,i=t.get("grid"),n=i.get("header"),r=i.get("el").find(".bui-grid-body"),o=n.get("el").height()+r.height(),l=n.get("el").offset(),s=t.get("dragEl");if(!s){var a='<div class="bui-drag-line"></div>';s=$(a).appendTo("body"),t.set("dragEl",s)}s.css({top:l.top,left:e,height:o}),t.set("resizing",!0),t.set("draging",{start:e,end:e}),s.show()},hideDrag:function(){var e=this,t=e.get("dragEl");t&&t.hide(),e.set("draging",null),e.set("resizing",!1)},moveDrag:function(e){var t=this,i=t.get("dragEl");i&&i.css("left",e)},_getColumn:function(e){var t=this,i=t.get("grid").get("columns"),r=null;return n.each(i,function(t){return t.containsElement(e)?(r=t,!1):void 0}),r},_getPreCol:function(e){var t=this,i=t.get("grid").get("columns"),r=null;return n.each(i,function(t){return t==e?!1:void(t.get("visible")&&(r=t))}),r}}),i.exports=s}),define("bui-grid/1.1.0/src/plugins/editing",[],function(e,t,i){function n(e){n.superclass.constructor.call(this,e)}var r=BUI.prefix+"grid-cell-inner",o=BUI.prefix+"grid-cell-error";BUI.extend(n,BUI.Base),n.ATTRS={align:{value:{points:["cl","cl"]}},showError:{value:!0},errorTpl:{value:'<span class="x-icon '+o+' x-icon-mini x-icon-error" title="{error}">!</span>'},isInitEditors:{value:!1},record:{},curEditor:{},hasValid:{},editors:{shared:!1,value:[]},triggerCls:{},triggerSelected:{value:!0}},BUI.augment(n,{initializer:function(e){var t=this;t.set("grid",e),t.initEditing(e)},renderUI:function(){var e=this,t=e.get("grid");BUI.use("bui/editor",function(i){e.initEditors(i),e._initGridEvent(t),e.set("isInitEditors",!0),e.fire("editorready")})},initEditing:function(){},_getCurEditor:function(){return this.get("curEditor")},_initGridEvent:function(e){function t(e,t){i.get("hasValid")&&i.validRecord(e,i.getFields(),$(t))}var i=this,n=e.get("header");e.on("cellclick",function(e){var t=null,n=e.domTarget,r=i.get("triggerCls"),o=i._getCurEditor();return o&&o.get("acceptEvent")?(o.accept(),o.hide()):o&&o.cancel(),t=i.getEditor(e.field),t&&$(n).closest("."+r).length&&(i.showEditor(t,e),!i.get("triggerSelected"))?!1:void 0}),e.on("rowcreated",function(e){t(e.record,e.row)}),e.on("rowremoved",function(e){i.get("record")==e.record&&i.cancel()}),e.on("rowupdated",function(e){t(e.record,e.row)}),e.on("scroll",function(e){var t=i._getCurEditor();if(t){var n=t.get("align"),r=n.node,o=r.position();o.top<0||o.top>e.bodyHeight?t.hide():(t.set("align",n),t.show())}}),n.on("afterVisibleChange",function(e){if(e.target&&e.target!=n){var t=e.target;i.onColumnVisibleChange(t)}})},initEditors:function(e){var t=this,i=t.get("grid"),n=[],r=i.get("columns");BUI.each(r,function(e){var i=t.getFieldConfig(e);i&&(i.name=e.get("dataIndex"),i.validator&&(i.validator=t.wrapValidator(i.validator)),n.push(i))});var o=t.getEditorCfgs(n);BUI.each(o,function(i){t.initEidtor(i,e)})},getFieldConfig:function(e){return e.get("editor")},wrapValidator:function(e){var t=this;return function(i){var n=t.get("record");return e(i,n)}},onColumnVisibleChange:function(){},getEditorCfgs:function(){},getEditorConstructor:function(e){return e.Editor},initEidtor:function(e,t){var i=this,n=i.getEditorConstructor(t),r=new n(e);return r.render(),i.get("editors").push(r),i.bindEidtor(r),r},bindEidtor:function(e){var t=this,i=t.get("grid"),n=i.get("store");e.on("accept",function(){var i=t.get("record");t.updateRecord(n,i,e),t.fire("accept",{editor:e,record:i}),t.set("curEditor",null)}),e.on("cancel",function(){t.fire("cancel",{editor:e,record:t.get("record")}),t.set("curEditor",null)})},getEditor:function(){},getAlignNode:function(){},getEditValue:function(){},showEditor:function(e,t){var i=this,n=i.getEditValue(t),r=i.getAlignNode(t);if(i.beforeShowEditor(e,t),i.set("record",t.record),i.fire("beforeeditorshow",{editor:e,record:t.record}),e.setValue(n),r){var o=i.get("align");o.node=r,e.set("align",o)}e.show(),i.focusEditor(e,t.field),i.set("curEditor",e),i.fire("editorshow",{editor:e,record:t.record})},focusEditor:function(e){e.focus()},beforeShowEditor:function(){},_createEditOptions:function(e,t){var i=this,n=i.get("grid"),r=n.findRow(e),o=n.findColumnByField(t),l=n.findCell(o.get("id"),r);return{record:e,field:t,cell:l[0],row:r[0]}},valid:function(){var e=this,t=e.get("grid"),i=t.get("store");if(i){var n=i.getResult();BUI.each(n,function(t){e.validRecord(t,e.getFields())})}e.set("hasValid",!0)},isValid:function(){var e=this,t=e.get("grid");return e.get("hasValid")||e.valid(),!t.get("el").find("."+o).length},clearErrors:function(){var e=this,t=e.get("grid");t.get("el").find("."+o).remove()},getFields:function(){},validRecord:function(e,t,i){var n=this,r=[];n.setInternal("record",e),t=t||n.getFields(),BUI.each(t,function(t){var i=t.get("name"),n=e[i]||"",o=t.getValidError(n);o&&r.push({name:i,error:o,id:t.get("id")})}),n.showRecordError(e,r,i)},showRecordError:function(e,t,i){var n=this,r=n.get("grid");i=i||r.findRow(e),i&&(n._clearRowError(i),BUI.each(t,function(e){var t=r.findCell(e.id,i);n._showCellError(t,e.error)}))},updateRecord:function(){},_clearRowError:function(e){e.find("."+o).remove()},_showCellError:function(e,t){var i=this,n=BUI.substitute(i.get("errorTpl"),{error:t}),o=e.find("."+r);$(n).appendTo(o)},edit:function(e,t){var i=this,n=i._createEditOptions(e,t),r=i.getEditor(t);i.showEditor(r,n)},cancel:function(){var e=this,t=e.get("editors");BUI.each(t,function(e){e.get("visible")&&e.cancel()}),e.set("curEditor",null),e.set("record",null)},destructor:function(){var e=this,t=e.get("editors");BUI.each(t,function(e){e.destroy&&e.destroy()}),e.off(),e.clearAttrVals()}}),i.exports=n});